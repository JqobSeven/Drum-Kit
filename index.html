<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Drum Kit</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
        $(document).keydown(function(e){
            var code = e.keyCode;
                const audio = $(`audio[data-key = ${e.keyCode}]`).get(0);
                const key = $(`.key[data-key = ${e.keyCode}]`);

                if(!audio) return;

                key.addClass('playing');
                audio.currentTime = 0
                audio.play();
        })
    });

    $(document).ready(function(){
        $('.key').on('webkitTransitionEnd oTransitionEnd transitionend msTransitionEnd', removeTransition);
    });

    function removeTransition(e){
        if(e.originalEvent.propertyName != 'transform') return;

        $(this).removeClass('playing');
    }
    </script>
</head>

<body>
    <div class = "keys">
        <div class= "key" data-key ="65"><kbd>A</kbd><span>Kick</span></div>
        <div class= "key" data-key ="83"><kbd>S</kbd><span>Closed-Hat</span></div>
        <div class= "key" data-key ="68"><kbd>D</kbd><span>Clap</span></div>
        <div class= "key" data-key ="70"><kbd>F</kbd><span>Snare</span></div>
        <div class= "key" data-key ="71"><kbd>G</kbd><span>Open-Hat</span></div>
        <div class= "key" data-key ="72"><kbd>H</kbd><span>Ride</span></div>
        <div class= "key" data-key ="74"><kbd>J</kbd><span>Tom</span></div>
        <div class= "key" data-key ="75"><kbd>K</kbd><span>Crash</span></div>
        <div class= "key" data-key ="76"><kbd>L</kbd><span>Timbale</span></div>
    </div>

    <audio data-key ="65" src ="sounds/kick.wav"></audio>
    <audio data-key ="83" src ="sounds/closed-hat.wav"></audio>
    <audio data-key ="68" src ="sounds/clap.wav"></audio>
    <audio data-key ="70" src ="sounds/snare.wav"></audio>
    <audio data-key ="71" src ="sounds/open-hat.wav"></audio>
    <audio data-key ="72" src ="sounds/ride.wav"></audio>
    <audio data-key ="74" src ="sounds/tom.wav"></audio>
    <audio data-key ="75" src ="sounds/crash.wav"></audio>
    <audio data-key ="76" src ="sounds/timbale.wav"></audio>

</body>
</html>